{"version":3,"file":"useMatchMedia-CERtemgT.cjs","sources":["../../src/composables/useMatchMedia.ts"],"sourcesContent":["import { getCurrentInstance, ref, type Ref } from \"vue\";\nimport { getOption } from \"@/utils/config\";\nimport { useEventListener } from \"./useEventListener\";\nimport { isClient } from \"@/utils/ssr\";\n\n/**\n * Checks if the match media is mobile.\n * @param mobileBreakpoint px breakpoint\n */\nexport function useMatchMedia(mobileBreakpoint?: string): {\n    isMobile: Ref<boolean>;\n} {\n    const isMobile = ref(false);\n    const mediaQuery = ref<MediaQueryList>();\n\n    // getting a hold of the internal instance in setup()\n    const vm = getCurrentInstance();\n    if (!vm)\n        throw new Error(\n            \"useMatchMedia must be called within a component setup function.\",\n        );\n    // get component props\n    const props = vm.props;\n\n    const configField = vm.proxy?.$options.configField;\n    if (!configField)\n        throw new Error(\"component must define the 'configField' option.\");\n\n    // get mobileBreakpoint width value\n    let width = props.mobileBreakpoint;\n    if (!width) {\n        const defaultWidth = getOption(\n            `mobileBreakpoint`,\n            mobileBreakpoint || \"1023px\",\n        );\n\n        width = getOption(`${configField}.mobileBreakpoint`, defaultWidth);\n    }\n\n    // define match media query ref\n    mediaQuery.value = isClient\n        ? window.matchMedia(`(max-width: ${width})`)\n        : undefined;\n\n    if (mediaQuery.value) {\n        isMobile.value = mediaQuery.value.matches;\n        useEventListener(mediaQuery.value, \"change\", onMatchMedia);\n    } else {\n        isMobile.value = false;\n    }\n\n    function onMatchMedia(event: any): void {\n        isMobile.value = event.matches;\n    }\n\n    return { isMobile };\n}\n"],"names":["ref","getCurrentInstance","getOption","isClient","useEventListener"],"mappings":";;;;;AASO,SAAS,cAAc,kBAE5B;;AACQ,QAAA,WAAWA,QAAI,KAAK;AAC1B,QAAM,aAAaA,IAAAA,IAAoB;AAGvC,QAAM,KAAKC,IAAAA,mBAAmB;AAC9B,MAAI,CAAC;AACD,UAAM,IAAI;AAAA,MACN;AAAA,IACJ;AAEJ,QAAM,QAAQ,GAAG;AAEX,QAAA,eAAc,QAAG,UAAH,mBAAU,SAAS;AACvC,MAAI,CAAC;AACK,UAAA,IAAI,MAAM,iDAAiD;AAGrE,MAAI,QAAQ,MAAM;AAClB,MAAI,CAAC,OAAO;AACR,UAAM,eAAeC,OAAA;AAAA,MACjB;AAAA,MACA,oBAAoB;AAAA,IACxB;AAEA,YAAQA,OAAU,UAAA,GAAG,WAAW,qBAAqB,YAAY;AAAA,EAAA;AAIrE,aAAW,QAAQC,OACb,WAAA,OAAO,WAAW,eAAe,KAAK,GAAG,IACzC;AAEN,MAAI,WAAW,OAAO;AACT,aAAA,QAAQ,WAAW,MAAM;AACjBC,qBAAAA,iBAAA,WAAW,OAAO,UAAU,YAAY;AAAA,EAAA,OACtD;AACH,aAAS,QAAQ;AAAA,EAAA;AAGrB,WAAS,aAAa,OAAkB;AACpC,aAAS,QAAQ,MAAM;AAAA,EAAA;AAG3B,SAAO,EAAE,SAAS;AACtB;;"}