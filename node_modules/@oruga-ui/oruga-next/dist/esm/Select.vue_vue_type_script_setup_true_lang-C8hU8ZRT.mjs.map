{"version":3,"file":"Select.vue_vue_type_script_setup_true_lang-C8hU8ZRT.mjs","sources":["../../src/components/select/Select.vue"],"sourcesContent":["<script setup lang=\"ts\" generic=\"T, IsMultiple extends boolean = false\">\nimport {\n    computed,\n    watch,\n    nextTick,\n    useAttrs,\n    useId,\n    useTemplateRef,\n} from \"vue\";\n\nimport OIcon from \"../icon/Icon.vue\";\n\nimport { getDefault } from \"@/utils/config\";\nimport { isDefined, isTrueish } from \"@/utils/helpers\";\nimport {\n    defineClasses,\n    isGroupOption,\n    normalizeOptions,\n    useInputHandler,\n    useSequentialId,\n} from \"@/composables\";\n\nimport { injectField } from \"../field/fieldInjection\";\n\nimport type { SelectProps } from \"./props\";\n\n/**\n * Select an item in a list. Use with Field to access all functionalities.\n * @displayName Select\n * @style _select.scss\n */\ndefineOptions({\n    isOruga: true,\n    name: \"OSelect\",\n    configField: \"select\",\n    inheritAttrs: false,\n});\n\ntype ModelValue = SelectProps<T, IsMultiple>[\"modelValue\"];\n\nconst props = withDefaults(defineProps<SelectProps<T, IsMultiple>>(), {\n    override: undefined,\n    modelValue: undefined,\n    // multiple: false,\n    options: undefined,\n    size: () => getDefault(\"select.size\"),\n    variant: () => getDefault(\"select.variant\"),\n    placeholder: undefined,\n    disabled: false,\n    required: false,\n    expanded: false,\n    rounded: false,\n    nativeSize: undefined,\n    iconPack: () => getDefault(\"select.iconPack\"),\n    icon: () => getDefault(\"select.icon\"),\n    iconClickable: false,\n    iconRight: () => getDefault(\"select.iconRight\"),\n    iconRightClickable: false,\n    iconRightVariant: undefined,\n    id: () => useId(),\n    useHtml5Validation: () => getDefault(\"useHtml5Validation\", true),\n    customValidation: \"\",\n    autocomplete: () => getDefault(\"select.autocomplete\", \"off\"),\n    statusIcon: () => getDefault(\"statusIcon\", true),\n});\n\nconst emits = defineEmits<{\n    /**\n     * modelValue prop two-way binding\n     * @param value {T | T[]} updated modelValue prop\n     */\n    \"update:model-value\": [value: ModelValue];\n    /**\n     * on input focus event\n     * @param event {Event} native event\n     */\n    focus: [event: Event];\n    /**\n     * on input blur event\n     * @param event {Event} native event\n     */\n    blur: [event: Event];\n    /**\n     * on input invalid event\n     * @param event {Event} native event\n     */\n    invalid: [event: Event];\n    /**\n     * on icon click event\n     * @param event {Event} native event\n     */\n    \"icon-click\": [event: Event];\n    /**\n     * on icon right click event\n     * @param event {Event} native event\n     */\n    \"icon-right-click\": [event: Event];\n}>();\n\nconst selectRef = useTemplateRef(\"selectElement\");\n\n// use form input functionality\nconst { checkHtml5Validity, onBlur, onFocus, onInvalid, setFocus, isValid } =\n    useInputHandler(selectRef, emits, props);\n\n// inject parent field component if used inside one\nconst { parentField, statusVariant, statusVariantIcon } = injectField();\n\n// if `id` is given set as `for` property on o-field wrapper\nif (props.id) parentField?.value?.setInputId(props.id);\n\nconst vmodel = defineModel<ModelValue>({\n    get: (value) =>\n        typeof value !== \"undefined\"\n            ? value\n            : ((props.multiple ? [] : \"\") as ModelValue),\n    set: (value) =>\n        typeof value !== \"undefined\"\n            ? value\n            : ((props.multiple ? [] : undefined) as ModelValue),\n    default: undefined,\n});\n\n/**\n * When v-model is changed:\n *  1. Set parent field filled state.\n *  2. Check html5 valdiation\n */\nwatch(\n    vmodel,\n    (value) => {\n        if (parentField?.value) parentField.value.setFilled(!!value);\n        if (!isValid.value) checkHtml5Validity();\n    },\n    { immediate: true, flush: \"post\" },\n);\n\n// create a unique id sequence\nconst { nextSequence } = useSequentialId();\n\n/** normalized programamtic options */\nconst normalizedOptions = computed(() =>\n    normalizeOptions<T>(props.options, nextSequence),\n);\n\nconst placeholderVisible = computed(\n    () =>\n        !isTrueish(props.multiple) &&\n        (!isDefined(vmodel.value) || vmodel.value === \"\"),\n);\n\n// --- Icon Feature ---\n\nconst hasIconRight = computed(\n    () =>\n        (!!props.iconRight && !isTrueish(props.multiple)) ||\n        (props.statusIcon && !!statusVariantIcon.value),\n);\n\nconst rightIcon = computed(() =>\n    props.iconRight ? props.iconRight : statusVariantIcon.value,\n);\n\nconst rightIconVariant = computed(() =>\n    props.iconRight\n        ? props.iconRightVariant || props.variant\n        : statusVariant.value,\n);\n\nfunction iconClick(emit, event: Event): void {\n    emits(emit, event);\n    nextTick(() => setFocus());\n}\n\nfunction leftIconClick(event: Event): void {\n    if (props.iconClickable) iconClick(\"icon-click\", event);\n}\n\nfunction rightIconClick(event: Event): void {\n    if (props.iconRightClickable) iconClick(\"icon-right-click\", event);\n}\n\n// --- Computed Component Classes ---\n\nconst attrs = useAttrs();\n\nconst inputBind = computed(() => ({\n    ...parentField?.value?.inputAttrs,\n    ...attrs,\n}));\n\nconst rootClasses = defineClasses(\n    [\"rootClass\", \"o-select\"],\n    [\n        \"sizeClass\",\n        \"o-select--\",\n        computed(() => props.size),\n        computed(() => !!props.size),\n    ],\n    [\n        \"variantClass\",\n        \"o-select--\",\n        computed(() => statusVariant.value || props.variant),\n        computed(() => !!statusVariant.value || !!props.variant),\n    ],\n    [\n        \"expandedClass\",\n        \"o-select--expanded\",\n        null,\n        computed(() => props.expanded),\n    ],\n    [\n        \"disabledClass\",\n        \"o-select--disabled\",\n        null,\n        computed(() => isTrueish(props.disabled)),\n    ],\n    [\n        \"roundedClass\",\n        \"o-select--rounded\",\n        null,\n        computed(() => isTrueish(props.rounded)),\n    ],\n    [\"hasIconRightClass\", \"o-select--icon-right\", null, hasIconRight],\n    [\n        \"multipleClass\",\n        \"o-select--multiple\",\n        null,\n        computed(() => isTrueish(props.multiple)),\n    ],\n);\n\nconst selectClasses = defineClasses(\n    [\"selectClass\", \"o-select__input\"],\n    [\n        \"iconLeftSpaceClass\",\n        \"o-select__input--iconspace-left\",\n        null,\n        computed(() => !!props.icon),\n    ],\n    [\n        \"iconRightSpaceClass\",\n        \"o-select__input--iconspace-right\",\n        null,\n        hasIconRight,\n    ],\n    [\n        \"placeholderClass\",\n        \"o-select__input--placeholder\",\n        null,\n        placeholderVisible,\n    ],\n    [\n        \"arrowedClass\",\n        \"o-select__input--arrowed\",\n        null,\n        computed(() => !hasIconRight.value && !isTrueish(props.multiple)),\n    ],\n);\n\nconst iconLeftClasses = defineClasses([\"iconLeftClass\", \"o-select__icon-left\"]);\n\nconst iconRightClasses = defineClasses([\n    \"iconRightClass\",\n    \"o-select__icon-right\",\n]);\n\n// --- Expose Public Functionalities ---\n\n/** expose functionalities for programmatic usage */\ndefineExpose({ focus: setFocus, value: vmodel });\n</script>\n\n<template>\n    <div data-oruga=\"select\" :class=\"rootClasses\">\n        <o-icon\n            v-if=\"icon\"\n            :class=\"iconLeftClasses\"\n            :clickable=\"iconClickable\"\n            :icon=\"icon\"\n            :pack=\"iconPack\"\n            :size=\"size\"\n            @click=\"leftIconClick($event)\" />\n\n        <select\n            v-bind=\"inputBind\"\n            :id=\"id\"\n            ref=\"selectElement\"\n            v-model=\"vmodel\"\n            data-oruga-input=\"select\"\n            :class=\"selectClasses\"\n            :autocomplete=\"autocomplete\"\n            :multiple=\"props.multiple\"\n            :size=\"nativeSize\"\n            :disabled=\"disabled\"\n            :required=\"required\"\n            @blur=\"onBlur\"\n            @focus=\"onFocus\"\n            @invalid=\"onInvalid\">\n            <template v-if=\"placeholder || $slots.placeholder\">\n                <option v-if=\"placeholderVisible\" value=\"\" disabled hidden>\n                    <!--\n                        @slot Override the placeholder\n                    -->\n                    <slot name=\"placeholder\">\n                        {{ placeholder }}\n                    </slot>\n                </option>\n            </template>\n\n            <!--\n                @slot Override the options, default is options prop\n            -->\n            <slot>\n                <template v-for=\"option in normalizedOptions\" :key=\"option.key\">\n                    <optgroup\n                        v-if=\"isGroupOption(option)\"\n                        v-show=\"!option.hidden\"\n                        v-bind=\"option.attrs\"\n                        :label=\"option.label\"\n                        :value=\"option.value\">\n                        <option\n                            v-for=\"_option in option.options\"\n                            v-show=\"!_option.hidden\"\n                            v-bind=\"_option.attrs\"\n                            :key=\"_option.key\"\n                            :value=\"_option.value\"\n                            :selected=\"option.value === vmodel\">\n                            {{ _option.label }}\n                        </option>\n                    </optgroup>\n\n                    <option\n                        v-else\n                        v-show=\"!option.hidden\"\n                        v-bind=\"option.attrs\"\n                        :value=\"option.value\"\n                        :selected=\"option.value === vmodel\">\n                        {{ option.label }}\n                    </option>\n                </template>\n            </slot>\n        </select>\n\n        <o-icon\n            v-if=\"hasIconRight\"\n            :class=\"iconRightClasses\"\n            :clickable=\"iconRightClickable\"\n            :icon=\"rightIcon\"\n            :pack=\"iconPack\"\n            :size=\"size\"\n            :variant=\"rightIconVariant\"\n            both\n            @click=\"rightIconClick\" />\n    </div>\n</template>\n"],"names":["_useModel","_a"],"mappings":"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"}