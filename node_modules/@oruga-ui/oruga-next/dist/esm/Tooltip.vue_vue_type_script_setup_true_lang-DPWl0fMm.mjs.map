{"version":3,"file":"Tooltip.vue_vue_type_script_setup_true_lang-DPWl0fMm.mjs","sources":["../../src/components/tooltip/Tooltip.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, computed, watch, nextTick, useId, type Component } from \"vue\";\n\nimport PositionWrapper from \"../utils/PositionWrapper.vue\";\n\nimport { getDefault } from \"@/utils/config\";\nimport { isClient } from \"@/utils/ssr\";\nimport { defineClasses, useClickOutside } from \"@/composables\";\n\nimport type { TooltipProps } from \"./props\";\n\n/**\n * Display a brief helper text to your user.\n * @displayName Tooltip\n * @style _tooltip.scss\n */\ndefineOptions({\n    isOruga: true,\n    name: \"OTooltip\",\n    configField: \"tooltip\",\n});\n\nconst props = withDefaults(defineProps<TooltipProps>(), {\n    override: undefined,\n    active: false,\n    label: undefined,\n    variant: () => getDefault(\"tooltip.variant\"),\n    position: () => getDefault(\"tooltip.position\", \"auto\"),\n    always: false,\n    disabled: false,\n    animation: () => getDefault(\"tooltip.animation\", \"fade\"),\n    multiline: false,\n    triggerTag: () => getDefault(\"tooltip.triggerTag\", \"div\"),\n    triggers: () => getDefault(\"tooltip.triggers\", [\"hover\", \"focus\"]),\n    delay: undefined,\n    closeable: () =>\n        getDefault(\"tooltip.closeable\", [\"escape\", \"outside\", \"content\"]),\n    teleport: () => getDefault(\"dropdown.teleport\", false),\n});\n\nconst emits = defineEmits<{\n    /**\n     * active prop two-way binding\n     * @param value {boolean} - updated active prop\n     */\n    \"update:active\": [value: boolean];\n    /** on active change to false event */\n    close: [];\n    /** on active change to true event */\n    open: [];\n}>();\n\nconst isActive = defineModel<boolean>(\"active\", { default: false });\n\nwatch(isActive, (value) => {\n    if (value) emits(\"open\");\n    else emits(\"close\");\n});\n\nconst tooltipId = useId();\n\nconst timer = ref();\n\nconst autoPosition = ref(props.position);\n\n/** update autoPosition on prop change */\nwatch(\n    () => props.position,\n    (v) => (autoPosition.value = v),\n);\n\n// --- Event Handler ---\n\nconst contentRef = ref<HTMLElement | Component>();\nconst triggerRef = ref<HTMLElement>();\n\nconst cancelOptions = computed<string[]>(() =>\n    typeof props.closeable === \"boolean\"\n        ? props.closeable\n            ? [\"escape\", \"outside\", \"content\"]\n            : []\n        : props.closeable,\n);\n\n// set click outside handler\nif (isClient && cancelOptions.value.includes(\"outside\")) {\n    useClickOutside([contentRef, triggerRef], onClickedOutside, {\n        trigger: isActive,\n        passive: true,\n    });\n}\n\n/** Close tooltip if clicked outside. */\nfunction onClickedOutside(): void {\n    if (!isActive.value || props.always) return;\n    if (!cancelOptions.value.includes(\"outside\")) return;\n    isActive.value = false;\n}\n\n/** Escape keydown event that is bound to the trigger */\nfunction onEscape(): void {\n    if (!isActive.value) return;\n    if (!cancelOptions.value.includes(\"escape\")) return;\n    isActive.value = false;\n}\n\nfunction onClick(): void {\n    if (!props.triggers.includes(\"click\")) return;\n    // if not active, toggle after clickOutside event\n    // this fixes toggling programmatic\n    nextTick(() => setTimeout(() => open()));\n}\n\nfunction onContextMenu(event: Event): void {\n    if (!props.triggers.includes(\"contextmenu\")) return;\n    event.preventDefault();\n    open();\n}\n\nfunction onFocus(): void {\n    if (!props.triggers.includes(\"focus\")) return;\n    open();\n}\n\nfunction onHover(): void {\n    if (!props.triggers.includes(\"hover\")) return;\n    open();\n}\n\nfunction open(): void {\n    if (props.disabled) return;\n    if (props.delay) {\n        timer.value = setTimeout(() => {\n            isActive.value = true;\n            timer.value = null;\n        }, props.delay);\n    } else {\n        isActive.value = true;\n    }\n}\n\nfunction onClose(): void {\n    if (!cancelOptions.value.includes(\"content\")) return;\n    isActive.value = !props.closeable;\n    if (timer.value && props.closeable) clearTimeout(timer.value);\n}\n\n// --- Computed Component Classes ---\n\nconst rootClasses = defineClasses(\n    [\"rootClass\", \"o-tooltip\"],\n    [\n        \"teleportClass\",\n        \"o-tooltip--teleport\",\n        null,\n        computed(() => !!props.teleport),\n    ],\n);\n\nconst triggerClasses = defineClasses([\"triggerClass\", \"o-tooltip__trigger\"]);\n\nconst contentClasses = defineClasses(\n    [\"contentClass\", \"o-tooltip__content\"],\n    [\n        \"positionClass\",\n        \"o-tooltip__content--\",\n        autoPosition,\n        computed(() => !!autoPosition.value),\n    ],\n    [\n        \"variantClass\",\n        \"o-tooltip__content--\",\n        computed(() => props.variant),\n        computed(() => !!props.variant),\n    ],\n    [\n        \"multilineClass\",\n        \"o-tooltip__content--multiline\",\n        null,\n        computed(() => props.multiline),\n    ],\n    [\n        \"alwaysClass\",\n        \"o-tooltip__content--always\",\n        null,\n        computed(() => props.always),\n    ],\n);\n\nconst arrowClasses = defineClasses(\n    [\"arrowClass\", \"o-tooltip__arrow\"],\n    [\n        \"arrowPositionClass\",\n        \"o-tooltip__arrow--\",\n        autoPosition,\n        computed(() => !!autoPosition.value),\n    ],\n    [\n        \"arrowVariantClass\",\n        \"o-tooltip__arrow--\",\n        computed(() => props.variant),\n        computed(() => !!props.variant),\n    ],\n);\n</script>\n\n<template>\n    <div data-oruga=\"tooltip\" :class=\"rootClasses\">\n        <component\n            :is=\"triggerTag\"\n            ref=\"triggerRef\"\n            :class=\"triggerClasses\"\n            aria-haspopup=\"true\"\n            :aria-describedby=\"tooltipId\"\n            @keydown.escape=\"onEscape\"\n            @click=\"onClick\"\n            @contextmenu=\"onContextMenu\"\n            @mouseenter=\"onHover\"\n            @focus.capture=\"onFocus\"\n            @blur.capture=\"onClose\"\n            @mouseleave=\"onClose\">\n            <!--\n                @slot Tooltip trigger slot\n                @binding {boolean} active - tooltip active state\n            -->\n            <slot :active=\"isActive\" />\n        </component>\n\n        <PositionWrapper\n            v-slot=\"{ setContent }\"\n            v-model:position=\"autoPosition\"\n            :teleport=\"teleport\"\n            :class=\"rootClasses\"\n            :trigger=\"triggerRef\"\n            default-position=\"top\"\n            :disabled=\"!isActive\">\n            <transition :name=\"animation\">\n                <div\n                    v-show=\"isActive || (always && !disabled)\"\n                    :id=\"tooltipId\"\n                    :ref=\"(el) => (contentRef = setContent(el as HTMLElement))\"\n                    :class=\"contentClasses\"\n                    role=\"tooltip\">\n                    <span :class=\"arrowClasses\"></span>\n\n                    <!--\n                        @slot Tooltip content, default is label prop\n                    -->\n                    <slot name=\"content\">{{ label }}</slot>\n                </div>\n            </transition>\n        </PositionWrapper>\n    </div>\n</template>\n"],"names":["_useModel"],"mappings":"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"}